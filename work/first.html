<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/redux@4.1.1/dist/redux.min.js"></script>
    <style type="text/css">
        .table {
            border-radius: 3%;
            width: 600px;
            height: 900px;
            position: fixed;
            margin: auto;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            border: 5px solid #FFFFFF;
            background-color: #F0F0F0;
        }

        body {
            background-color: #1f1f23;
        }

        .list {
            border-radius: 5px;
            border: 1px solid #000000;
            width: 40%;
            height: 400px;
            background-color: #FFFFFF;
            margin: 5%;
            overflow: auto;
        }

        .top {
            background-color: #B8C1C8;
            border-bottom: 1px solid #000000;
            position: sticky;
        }

        .box {
            border-right: 1px solid #000000;
            width: 60px;
            text-align: center;
        }

        .box_name {
            border-right: 1px solid #000000;
            width: 120px;
            text-align: center;
        }

        .box:last-child {
            border: none
        }

        .file {
            position: relative;
            top: 10px;
            left: 30px
        }

        input[type="file"] {
            color: transparent;
        }

        td {
            text-align: center;
            margin:2px
        }

        tbody {
            background-color: white;
        }

        tbody:first-child {
            border-top: none
        }
    </style>
    <script type="text/babel">
        class List extends React.Component {
            render() {
                let member = []
                return <div className="list">
                    <table className="top" align="center">
                        <thead>
                            <tr>
                                <td className="box">No.</td>
                                <td className="box_name">name</td>
                                <td className="box">Tier</td>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            }
        }

        class Member_input extends React.Component {
            render() {
                return <input type="file" name="file" id="file" className="file" />
            }
        }
        function addRow(name, tier, num) {
            let tbodyObj = document.getElementsByTagName("tbody")[0];
            let trObj = document.createElement("tr");
            let tdArr = new Array();
            tbodyObj.appendChild(trObj);

            for (let i = 0; i < 3; i++) {
                let tdObj = document.createElement("td");
                trObj.appendChild(tdObj);

                let inputObj = document.createElement("div");
                if (i === 1) {
                    inputObj.style.borderRight = "1 solid #000000"
                    inputObj.style.width = "width: 120px"
                } else {
                    inputObj.style.border = "1 solid #000000"
                    inputObj.style.width = "80px"
                }
                tdObj.appendChild(inputObj)
                tdArr.push(tdObj);
            }
            tdArr[0].innerHTML = num
            tdArr[1].innerHTML = name
            tdArr[2].innerHTML = tier
            tdArr.length = 0;
        }
        window.addEventListener("load", () => {
            ReactDOM.render(<Member_input />, document.getElementById("member_input"))
            ReactDOM.render(<List />, document.getElementById("list"))
            document.getElementById("file").addEventListener("change", function () {
                let file = this.files[0];
                let reader = new FileReader();
                let count = 0
                reader.onload = function (progressEvent) {
                    let lines = this.result.split('\n')
                    for (let line = 0; line < lines.length; line++) {
                        if (lines[line].match(/\w/)) {
                            count++
                            let tier = lines[line].length % 3 + 1
                            addRow(lines[line], tier, count)
                        }
                    }
                }
                reader.readAsText(file);
            })
        })
    </script>
</head>

<body>
    <div class="table">
        <div id="member_input"></div>
        <div id="list">
        </div>
    </div>
    <script type="text/javascript">

    </script>

</body>

</html>